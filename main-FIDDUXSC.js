import{b as X,c as b,d as Y,e as tt,f as et,g as n}from"./chunk-67I65ZBU.js";import{a as g}from"./chunk-AH3ZPUKH.js";import{$a as z,$b as ot,L as T,La as P,Ma as j,N as H,Ob as G,Pb as q,Q as _,Qa as c,Qb as K,Ra as s,Rb as Z,Sa as I,Sb as J,Ta as F,Tb as W,V as i,Va as N,Wa as O,Xa as B,Ya as h,Z as A,Za as L,_ as k,aa as R,ab as U,fb as V,gb as $,hb as p,i as x,ka as D,m as M,mc as rt,pa as E,tb as Q,xa as l,y,za as S}from"./chunk-LF3VOW3X.js";var v=(t,r)=>{let e=i(b);return i(n).isAuthenticated()?!0:e.createUrlTree(["/login"],{queryParams:{return_url:r.url}})},at=()=>{let t=i(b);return i(n).isAuthenticated()?t.createUrlTree(["/tracked"]):t.createUrlTree(["/login"])};var it=[{path:"",pathMatch:"full",redirectTo:at},{path:"discover",loadComponent:()=>import("./chunk-F3CI5C6T.js").then(t=>t.DiscoverPage),canActivate:[v]},{path:"login",loadComponent:()=>import("./chunk-HNZ3HK3J.js").then(t=>t.LoginPage)},{path:"register",loadComponent:()=>import("./chunk-IC7DLF24.js").then(t=>t.RegisterPage)},{path:"tracked",loadComponent:()=>import("./chunk-XAJCXVFC.js").then(t=>t.TrackedPage),canActivate:[v]}];var m=class{constructor(r){this.httpClient=r}trackedChanged$=new x(void 0);getTracked(){return this.trackedChanged$.pipe(T(()=>this.httpClient.get("/api/v1/media/tracked")))}untrack(r,e){return this.httpClient.post(`/api/v1/${e.toLowerCase()}/${r}/untrack`,{}).pipe(H(()=>this.trackedChanged$.next()))}};var d=class t{authHttpClient=i(n);intercept(r,e){let o=localStorage.getItem(et);return o&&(r=r.clone({headers:r.headers.set("Authorization","Bearer "+o)})),e.handle(r).pipe(y(a=>(a instanceof q&&a.status===401&&this.authHttpClient.logout(),M(()=>a))))}static \u0275fac=function(e){return new(e||t)};static \u0275prov=_({token:t,factory:t.\u0275fac})};var nt={providers:[Q({eventCoalescing:!0}),tt(it),J(W()),{provide:Z,useClass:d,multi:!0},{provide:n,useClass:n},{provide:m,useFactory:t=>new m(t),deps:[K]},{provide:g,useClass:g}]};var mt=["*",[["mat-toolbar-row"]]],ct=["*","mat-toolbar-row"],pt=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275dir=S({type:t,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return t})(),lt=(()=>{class t{_elementRef=i(D);_platform=i(ot);_document=i(R);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=l({type:t,selectors:[["mat-toolbar"]],contentQueries:function(o,a,st){if(o&1&&L(st,pt,5),o&2){let w;z(w=U())&&(a._toolbarRows=w)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(o,a){o&2&&($(a.color?"mat-"+a.color:""),V("mat-toolbar-multiple-rows",a._toolbarRows.length>0)("mat-toolbar-single-row",a._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:ct,decls:2,vars:0,template:function(o,a){o&1&&(B(mt),h(0),h(1,1))},styles:[`.mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mat-button-text-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mat-button-outlined-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}
`],encapsulation:2,changeDetection:0})}return t})();function ut(t,r){if(t&1){let e=F();c(0,"button",3),N("click",function(){A(e);let a=O();return k(a.logout())}),p(1,"Logout"),s()}}var u=class t{authHttpClient=i(n);logout(){this.authHttpClient.logout().subscribe()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=l({type:t,selectors:[["app-header"]],decls:6,vars:1,consts:[["mat-button","","routerLink","/"],["mat-button","","routerLink","/discover"],["matButton","",1,"logout"],["matButton","",1,"logout",3,"click"]],template:function(e,o){e&1&&(c(0,"mat-toolbar")(1,"a",0),p(2,"Home"),s(),c(3,"a",1),p(4,"Discover"),s(),P(5,ut,2,0,"button",2),s()),e&2&&(E(5),j(o.authHttpClient.isAuthenticated()?5:-1))},dependencies:[rt,lt,Y],styles:["mat-toolbar[_ngcontent-%COMP%]{display:flex}mat-toolbar[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]{margin-left:auto}"]})};var f=class t{title="soon-fe";static \u0275fac=function(e){return new(e||t)};static \u0275cmp=l({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(e,o){e&1&&I(0,"app-header")(1,"router-outlet")},dependencies:[X,u],encapsulation:2})};G(f,nt).catch(t=>console.error(t));
