import"./chunk-XMGSTBON.js";import{a as C,c as P,d as M,g as S}from"./chunk-67I65ZBU.js";import{a as _,b as n,c as y,d as E,e as N,f as c,g as x,h as R,i as I,j as F,k as L,l as O,m as V,n as k,o as A}from"./chunk-KU6JSNDX.js";import{a as D,b as G,c as T,f as q,g as B,i as H}from"./chunk-TLXHLPPZ.js";import{Ka as w,La as b,Ma as v,Pa as d,Qa as e,Ra as t,Sa as u,V as l,Va as p,fa as f,hb as r,ib as h,lc as U,mc as j,pa as a,xa as g}from"./chunk-LF3VOW3X.js";function Q(m,o){m&1&&(e(0,"mat-error"),r(1,"Could not register"),t())}var z=class m{authService=l(S);router=l(P);route=l(C);form=new N({username:new c("",{nonNullable:!0,validators:[n.required]}),password:new c("",{nonNullable:!0,validators:[n.required,n.minLength(6)]}),email:new c("",{nonNullable:!0,validators:[n.required,n.email]})});showPassword=f(!1);constructor(){this.authService.isAuthenticated()&&this.router.navigate([""])}onSubmit(){this.authService.register(this.form.getRawValue()).subscribe({next:()=>this.forwardLoggedIn(),error:()=>this.form.setErrors([!0])})}forwardLoggedIn(){let o=this.route.snapshot.queryParams.return_url||"";this.router.navigate([o],{replaceUrl:!0})}togglePasswordVisibility(o){this.showPassword.set(!this.showPassword()),o.stopPropagation()}static \u0275fac=function(s){return new(s||m)};static \u0275cmp=g({type:m,selectors:[["app-login"]],decls:27,vars:7,consts:[[3,"ngSubmit","formGroup"],["formControlName","email","matInput","","autocomplete","new-email"],["formControlName","username","matInput","","autocomplete","new-username"],["formControlName","password","matInput","","autocomplete","new-password",3,"type"],["matIconButton","","matSuffix","","type","button",3,"click"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["routerLink","/login"]],template:function(s,i){s&1&&(e(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),r(3,"Sooon"),t()(),e(4,"mat-card-content")(5,"form",0),p("ngSubmit",function(){return i.onSubmit()}),b(6,Q,2,0,"mat-error"),e(7,"mat-form-field")(8,"mat-label"),r(9,"Email"),t(),u(10,"input",1),t(),e(11,"mat-form-field")(12,"mat-label"),r(13,"Username"),t(),u(14,"input",2),t(),e(15,"mat-form-field")(16,"mat-label"),r(17,"Password"),t(),u(18,"input",3),e(19,"button",4),p("click",function(K){return i.togglePasswordVisibility(K)}),e(20,"mat-icon"),r(21),t()()(),e(22,"button",5),r(23,"Register"),t()()(),e(24,"mat-card-footer")(25,"a",6),r(26,"Already have an account? Login now!"),t()()()),s&2&&(a(5),d("formGroup",i.form),a(),v(i.form.errors?6:-1),a(12),d("type",i.showPassword()?"text":"password"),a(),w("aria-label","Hide password")("aria-pressed",i.showPassword()),a(2),h(i.showPassword()?"visibility_off":"visibility"),a(),d("disabled",i.form.invalid))},dependencies:[D,G,q,T,F,x,_,y,E,R,I,O,k,H,A,L,j,U,V,B,M],styles:["mat-card[_ngcontent-%COMP%]{max-width:30rem;margin:0 auto;text-align:center}mat-card-header[_ngcontent-%COMP%]{justify-content:center}mat-card-title[_ngcontent-%COMP%]{font-size:2rem}mat-card-content[_ngcontent-%COMP%]{margin:1rem 0 .5rem}mat-card-footer[_ngcontent-%COMP%]{font-size:small;margin-bottom:1rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]})};export{z as RegisterPage};
