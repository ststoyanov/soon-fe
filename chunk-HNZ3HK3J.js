import"./chunk-XMGSTBON.js";import{a as C,c as P,d as M,g as S}from"./chunk-67I65ZBU.js";import{a as _,b as c,c as y,d as x,e as L,f as p,g as E,h as N,i as I,j as F,k as O,l as k,m as D,n as R,o as V}from"./chunk-KU6JSNDX.js";import{a as G,b as T,c as A,f as q,g as z,i as B}from"./chunk-TLXHLPPZ.js";import{Ka as b,La as v,Ma as w,Pa as l,Qa as t,Ra as e,Sa as d,V as s,Va as u,fa as f,hb as o,ib as h,lc as H,mc as U,pa as i,xa as g}from"./chunk-LF3VOW3X.js";function K(n,a){n&1&&(t(0,"mat-error"),o(1,"Wrong username or password"),e())}var j=class n{authService=s(S);router=s(P);route=s(C);form=new L({username:new p("",{nonNullable:!0,validators:[c.required]}),password:new p("",{nonNullable:!0,validators:[c.required]})});showPassword=f(!1);constructor(){this.authService.isAuthenticated()&&this.router.navigate([""])}onSubmit(){this.authService.login(this.form.getRawValue()).subscribe({next:()=>this.forwardLoggedIn(),error:()=>this.form.setErrors([!0])})}forwardLoggedIn(){let a=this.route.snapshot.queryParams.return_url||"";this.router.navigate([a],{replaceUrl:!0})}togglePasswordVisibility(a){this.showPassword.set(!this.showPassword()),a.stopPropagation()}static \u0275fac=function(m){return new(m||n)};static \u0275cmp=g({type:n,selectors:[["app-login"]],decls:23,vars:7,consts:[[3,"ngSubmit","formGroup"],["formControlName","username","matInput",""],["formControlName","password","matInput","",3,"type"],["matIconButton","","matSuffix","","type","button",3,"click"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["routerLink","/register"]],template:function(m,r){m&1&&(t(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),o(3,"Sooon"),e()(),t(4,"mat-card-content")(5,"form",0),u("ngSubmit",function(){return r.onSubmit()}),v(6,K,2,0,"mat-error"),t(7,"mat-form-field")(8,"mat-label"),o(9,"Username"),e(),d(10,"input",1),e(),t(11,"mat-form-field")(12,"mat-label"),o(13,"Password"),e(),d(14,"input",2),t(15,"button",3),u("click",function(J){return r.togglePasswordVisibility(J)}),t(16,"mat-icon"),o(17),e()()(),t(18,"button",4),o(19,"Login"),e()()(),t(20,"mat-card-footer")(21,"a",5),o(22,"Don't have an account? Register now!"),e()()()),m&2&&(i(5),l("formGroup",r.form),i(),w(r.form.errors?6:-1),i(8),l("type",r.showPassword()?"text":"password"),i(),b("aria-label","Hide password")("aria-pressed",r.showPassword()),i(2),h(r.showPassword()?"visibility_off":"visibility"),i(),l("disabled",r.form.invalid))},dependencies:[G,T,q,A,F,E,_,y,x,N,I,k,R,B,V,O,U,H,D,M,z],styles:["mat-card[_ngcontent-%COMP%]{max-width:30rem;margin:0 auto;text-align:center}mat-card-header[_ngcontent-%COMP%]{justify-content:center}mat-card-title[_ngcontent-%COMP%]{font-size:2rem}mat-card-content[_ngcontent-%COMP%]{margin:1rem 0 .5rem}mat-card-footer[_ngcontent-%COMP%]{font-size:small;margin-bottom:1rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.register-link[_ngcontent-%COMP%]{text-align:end;font-size:small}"]})};export{j as LoginPage};
